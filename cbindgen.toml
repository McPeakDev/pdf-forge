# cbindgen.toml – Controls auto-generation of include/rpdf.h
#
# Run manually with:
#   cargo install cbindgen
#   cbindgen --config cbindgen.toml --crate pdf-forge --output include/rpdf.h
#
# Or just `cargo build` – build.rs invokes cbindgen automatically.

language = "C"

# ── Header text ───────────────────────────────────────────────────────────────
header = """/*
 * rpdf.h – C API for template-driven HTML → PDF generation.
 *          Auto-generated by cbindgen from src/ffi.rs.
 *          Do not edit manually; changes will be overwritten on next build.
 *
 * MEMORY MANAGEMENT
 *   - Byte buffers (*out_buf) returned by rpdf_* functions MUST be freed
 *     by calling rpdf_free_buffer(*out_buf, *out_len).
 *   - String pointers (*out_json) MUST be freed with rpdf_free_string().
 *   - rpdf_last_error() returns a pointer valid until the next call on this
 *     thread – do NOT free it.
 *
 * ERROR CODES
 *   0  success
 *   1  null pointer argument
 *   2  invalid UTF-8 in input
 *   3  pipeline / layout error
 *   4  render / PDF error
 *
 * LINK FLAGS
 *   Windows MSVC  : pdf_forge.lib  Ws2_32.lib Bcrypt.lib Ntdll.lib Userenv.lib
 *   Windows MinGW : -lpdf_forge -lws2_32 -lbcrypt -lntdll -luserenv
 *   Linux/macOS   : -lpdf_forge -lpthread -ldl -lm
 */"""

# Include guard (#ifndef RPDF_H / #define RPDF_H / #endif)
include_guard = "RPDF_H"

# Preserve Rust /// doc-comments in the generated header
documentation = true

# Suppress internal types that aren't part of the public C API
[export]
exclude = ["Color"]
